<launch>
  
  <rosparam file="$(find objsearch_toplevel)/config/global_params.yaml" command="load" />
  <!-- Parameters specific to object query, used if parameters not provided at
       commandline -->
  <rosparam file="$(find object_query)/config/params.yaml" command="load" />

  <!-- Use this when a directory is passed to cloud - the clouds which contain
       the given string will be processed -->
  <arg name="match" default="NULL"/>
  <param name="/object_query/match" value="$(arg match)" />
  
  <arg name="query" />
  <param name="/object_query/query_features" value="$(arg query)" />
  <arg name="target" />
  <param name="/object_query/target_features" value="$(arg target)" />
  
  <arg name="output" default="NULL"/>
  <param name="/object_query/output_dir" value="$(arg output)" />
  <arg name="K" default="-1"/>
  <param name="/object_query/K" value="$(arg K)" />

  <!-- Step to use for the hough voting process, in metres. Defines cell size
       used for the grid. -->
  <arg name="unistep" default="0.1" />
  <arg name="x_step_hough" default="$(arg unistep)"/>
  <param name="/object_query/x_step_hough" value="$(arg x_step_hough)" />
  <arg name="y_step_hough" default="$(arg unistep)"/>
  <param name="/object_query/y_step_hough" value="$(arg y_step_hough)" />
  <arg name="z_step_hough" default="$(arg unistep)"/>
  <param name="/object_query/z_step_hough" value="$(arg z_step_hough)" />
  <!-- Number of points to extract from the hough grid at the end to check
       whether they lie in regions for the correct annotation  -->
  <arg name="n_max_points" default="5"/>
  <param name="/object_query/n_max_points" value="$(arg n_max_points)" />

  <arg name="regions" default="false"/>
  <param name="/object_query/output_regions" value="$(arg regions)" />
  
  <node name="object_query" pkg="object_query" type="query_object" output="screen" required="false"/>
</launch>
